---
title: "Planning and Design DB on AWS"
date: 2022-03-23T09:00:00+09:00
categories:
  - AWS
tags:
  - Cloud
  - AWS
  - Planning
  - DB
toc: true
toc_sticky: true
toc_label: "목차"
---

# 1. 데이터베이스 개념 및 일반 지침

## 1.1 클라우드 내 데이터베이스
  - 데이터베이스 유형
    - 관계형
    - 비관계형 키-값
    - 비관게형 문서
    - 비관계형 메모리
    - 비관계형 그래프
    - 비관계형 원장

## 1.2 데이터베이스 설계 시 고려 사항
  - 인터넷 규모 아키텍처
    - 데이터 분산
    - 여러 인스턴스에 걸쳐 밸런싱
    - 확장성

  - 데이터베이스 분산 방식
    - 파티셔닝
    - 샤딩 (테이블 분리하는 것이라 관리 복잡성 올라감)
    - 데이터베이스 연동
    - 클러스터링

  - 데이터베이스 및 애플리케이션 조정
    - 스케일 업 (수직 확장)
    - 스케일 아웃 (수평 확장)
  
  - 접근 방식
    - CAP 이론(트랜잭션 초점): 일관성 및 가용성 및 파티션 내성
    - PIE 이론(분석 초점): 패턴(쿼리)유연성 및 무한한 확장 및 효율성

## 1.3 트랜잭션 규정 준수
  - ACID 규정 준수
    - 원자성(Atomicity)
    - 일관성(Consistency)
    - 격리성(Isolation)
    - 내구성(Durability)

  - BASE 규정 준수
    - 기본적 가용성(Basically Available)
    - 소프트 상태(Soft State)
    - 최종 일관성(Eventually Consistent)

***

# 2. 데이터베이스 계획 및 설계

## 2.1 워크로드 요구 사항
  1. 데이터 스토리지
    - 파일 시스템(예: FSX, EFS)
    - 객체 스토어(예: S3)
    - 관계형 데이터베이스
    - 비관계형 데이터베이스

  2. 데이터 사용
    - 관계형 데이터 구성
      - OLTP(갱신 초점) 또는 OLAP(읽기 초점)
      - DSS(의사결정 시스템)
      - 데이터 웨어하우스
    - 비관게형 액세스 패턴
      - IoT
      - 애플리케이션 로그
      - 세션 상태
    - 데이터베이스 사용 및 사용자의 특성
    - 데이터 처리

  3. 데이터 볼륨, 속도 및 다양성
    - 데이터 볼륨
    - 데이터 속도
    - 데이터 다양성
  
  4. 데이터 수명
    - 활성
    - 임시
    - 아카이브

  5. 내구성 및 가용성
    - 내구성: 데이터가 항상 존재함을 알고 있음
    - 가용성: 필요할 때 데이터 액세스가 가능함을 알고 있음

## 2.2 설계 시 고려 사항
  1. 성능
    - 필수 지연 시간
    - IOPS
    - 읽기/쓰기 처리량
    - 동시성

  2. 용량 및 규모 조정
    - 용량
      - 기록 보기
      - 새 요구 사항 조사
      - 향후 증가 추정 
    - 규모 조정
      - 수직, 수평
      - 수동, 자동
    - 크기 조정: 인스턴스 유형 결정
      - 범용
      - 컴퓨팅 최적화
      - 메모리 최적화
      - 성능 순간 확장 가능

  3. 고가용성 (=중복성)
    - 읽기 전용 복제본
    - 클러스터링
    - 다중 AZ 배포
    - 다중 리전 배포

  4. 네트워킹
    - 워크로드가 온프레미스에 유지되어야 함
    - VPN 연결
    - AWS Direct Connect
    - VPC 구성
      - 퍼블릭/프라이빗 서브넷 설계

  5. 백업 및 복구
    - 목표 복구 지점(RPO): 얼마나 많은 데이터가 손실될 수 있습니까? (과거로 복구하는 데이터 관점)
    - 목표 복구 시간(RTO): 시스템이 얼마나 빨리 작동해야 합니까? (미래에 재기동하는 성능 관점)

  6. 보안 및 규정 준수
    - 전송 중 암호화
    - 저장 시 암호화
    - 인증 및 권한 부여 (IAM)
    - 데이터 마스킹

  - WAF
    - 보안, 안정성, 비용 최적화, 성능 효율성, 운영 탁월성

***

# 3. Amazon EC2의 데이터베이스

## 3.1 EC2로 데이터베이스 호스팅
  - 워크로드 경감
    - 비관리형: 전부 사용자가 지정
    - 관리형: OS 설치, 서버 유지 관리, 랙 앤 스택, 전력/HVAC/넷
    - 완전관리형: + 규모조정, 고가용성, 데이터베이스 백업, DB소프트웨어 패치&설치

  - 고려할 사항
    - 네트워크 연결
    - 고가용성
    - 보안 및 암호화
    - 백업
    - 모니터링

***

# 4. 특수 목적 데이터베이스

## 4.1 AWS로의 여정

## 4.2 데이터 모델링 기본 사항

***

# 5. Amazon RDS의 데이터베이스

## 5.1 Amazon RDS
  - RDS 이점
    - 손쉬운 관리
    - 높은 확장성
    - 가용성 및 내구성
    - 빠른 속도
    - 보안
    - 저렴한 비용
  
  - 완전 관리형 서비스의 장단점
    - 호스트 및 OS
      - 데이터베이스 호스트 운영체제에 대한 액세스 권한 없음
    - 스토리지
      - 서비스 한도 존재

## 5.2 Amazon RDS의 특징
  1. 고가용성
    - 다중 AZ 배포
      - 이점: 강화된 내구성, 향상된 가용성, 관리 개입 불필요
      - 장애 조치 조건: 기본 가용 영역의 가용성 손실, 네트워크 연결 장애, 컴퓨팅 & 스토리지 장애

## 5.3 Amazon RDS 설계 시 고려 사항